<!DOCTYPE html>
<html lang="en-us"><head><meta charset="utf-8">
<meta http-equiv="content-type" content="text/html">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title itemprop="name">Multiply your Archive Team Warriors with Docker and some little scripting | Asier&#39;s Webpage</title>
<meta property="og:title" content="Multiply your Archive Team Warriors with Docker and some little scripting | Asier&#39;s Webpage" />
<meta name="twitter:title" content="Multiply your Archive Team Warriors with Docker and some little scripting | Asier&#39;s Webpage" />
<meta itemprop="name" content="Multiply your Archive Team Warriors with Docker and some little scripting | Asier&#39;s Webpage" />
<meta name="application-name" content="Multiply your Archive Team Warriors with Docker and some little scripting | Asier&#39;s Webpage" />
<meta property="og:site_name" content="" />

<meta name="description" content="">
<meta itemprop="description" content="" />
<meta property="og:description" content="" />
<meta name="twitter:description" content="" />

<meta property="og:locale" content="en-us" />
<meta name="language" content="en-us" />



  <meta itemprop="image" content="https://123jimenez99.github.io" />
  <meta property="og:image" content="https://123jimenez99.github.io" />
  <meta name="twitter:image" content="https://123jimenez99.github.io" />
  <meta name="twitter:image:src" content="https://123jimenez99.github.io" />




    
    
    
    

    <meta property="og:type" content="article" />
    <meta property="og:article:published_time" content=2023-06-11T16:20:03&#43;0200 />
    <meta property="article:published_time" content=2023-06-11T16:20:03&#43;0200 />

    

    

    <script defer type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "Article",
        "headline": "Multiply your Archive Team Warriors with Docker and some little scripting",
        "author": {
        "@type": "Person",
        "name": ""
        },
        "datePublished": "2023-06-11",
        "description": "",
        "wordCount":  429 ,
        "mainEntityOfPage": "True",
        "dateModified": "2023-06-11",
        "image": {
        "@type": "imageObject",
        "url": ""
        },
        "publisher": {
        "@type": "Organization",
        "name": "Asier\u0027s Webpage"
        }
    }
    </script>


<meta name="generator" content="Hugo 0.113.0">

    

    <link rel="canonical" href="https://123jimenez99.github.io/posts/multiply_archive_team_warrior_instances_with_docker.html">
    <link href="../style.min.41175b050032d7b140ed7b503e6724d0166055787dc68ff6fb7e4d5d7b9aebf1.css" rel="stylesheet">
    <link href="../code-highlight.min.706d31975fec544a864cb7f0d847a73ea55ca1df91bf495fd12a177138d807cf.css" rel="stylesheet">

    
    <link rel="apple-touch-icon" sizes="180x180" href="../icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../icons/favicon-16x16.png">
    <link rel="mask-icon" href="../icons/safari-pinned-tab.svg">
    <link rel="shortcut icon" href="../favicon.ico">




<link rel="manifest" href="https://123jimenez99.github.io/site.webmanifest">

<meta name="msapplication-config" content="/browserconfig.xml">
<meta name="msapplication-TileColor" content="#2d89ef">
<meta name="theme-color" content="#434648">

    
    <link rel="icon" type="image/svg+xml" href="../icons/favicon.svg">

    
    </head>
<body data-theme = "auto" class="notransition">

<script src="../js/theme.min.c3935b0f189ca3ede59e2261839900ccfa21c8dd0a494c42a3256b4366e03032.js" integrity="sha256-w5NbDxico&#43;3lniJhg5kAzPohyN0KSUxCoyVrQ2bgMDI="></script>

<div class="navbar" role="navigation">
    <nav class="menu" aria-label="Main Navigation">
        <a href="https://123jimenez99.github.io/" class="logo">
            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" 
viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="feather feather-home">
<title>Home</title>
<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
<polyline points="9 22 9 12 15 12 15 22"></polyline>
</svg>
        </a>
        <input type="checkbox" id="menu-trigger" class="menu-trigger" />
        <label for="menu-trigger">
            <span class="menu-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" stroke="currentColor" fill="none" viewBox="0 0 14 14"><title>Menu</title><path stroke-linecap="round" stroke-linejoin="round" d="M10.595 7L3.40726 7"></path><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 3.51488L3.49301 3.51488"></path><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 10.4851H3.49301"></path><path stroke-linecap="round" stroke-linejoin="round" d="M0.5 12.5V1.5C0.5 0.947715 0.947715 0.5 1.5 0.5H12.5C13.0523 0.5 13.5 0.947715 13.5 1.5V12.5C13.5 13.0523 13.0523 13.5 12.5 13.5H1.5C0.947715 13.5 0.5 13.0523 0.5 12.5Z"></path></svg>
            </span>
        </label>

        <div class="trigger">
            <ul class="trigger-container">
                
                
                <li>
                    <a class="menu-link " href="../about.html">
                        About
                    </a>
                    
                </li>
                
                <li class="menu-separator">
                    <span>|</span>
                </li>
            </ul>
            <a id="mode" href="#">
                <svg xmlns="http://www.w3.org/2000/svg" class="mode-sunny" width="21" height="21" viewBox="0 0 14 14" stroke-width="1">
<title>LIGHT</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></circle><line x1="7" y1="0.5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="0.5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line></g></svg>
                <svg xmlns="http://www.w3.org/2000/svg" class="mode-moon" width="21" height="21" viewBox="0 0 14 14" stroke-width="1">
<title>DARK</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></circle><line x1="7" y1="0.5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="0.5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line></g></svg>
            </a>
        </div>
    </nav>
</div>

<div class="wrapper post">
    <main class="page-content" aria-label="Content">
        <article>
            <header class="header">
                <h1 class="header-title">Multiply your Archive Team Warriors with Docker and some little scripting</h1>
                
                <div class="post-meta">
                    <time datetime="2023-06-11T16:20:03&#43;02:00" itemprop="datePublished"> Jun 11, 2023 </time>
                </div>
            </header><div class="page-content">
                <p>The Archive Team plays a crucial role in preserving online content, and its significance becomes even more pronounced when considering platforms like Reddit, which may be prone to vanishing due to their very <a href="https://www.macrumors.com/2023/05/31/reddit-api-changes-pricing-apollo/">questionable practices</a>. Without further ado let&rsquo;s explain how this works.</p>
<p>The warrior runs on your computer and connects to the Archive Team server. It receives instructions on which websites to archive and contributes to the archiving process. Whenever a new archiving project is launched, the server assigns specific tasks to each Warrior. The Warrior downloads the assigned web content and sends it back to the server for permanent storage. With Docker and the power of scripting, we can create multiple containers easily, thus creating lots of warriors.</p>
<p>To achieve this, I&rsquo;ll make use of a script that generates the desired number of containers. Additionally, the number of jobs each container can handle can be adjusted, the limit being 6. If you wish to contribute even more, the script can be easily modified to automatically create additional containers.</p>
<blockquote>
<p>#!/bin/zsh</p>
<p>for i in {01..12}; do
docker run -d &ndash;name archiveteam_$i<br>
&ndash;env DOWNLOADER=&ldquo;Pico&rdquo; &ndash;env SELECTED_PROJECT=&ldquo;reddit&rdquo;<br>
&ndash;env CONCURRENT_ITEMS=&ldquo;6&rdquo;<br>
-p 80$i:8001 &ndash;restart=unless-stopped<br>
-e PUID=1002 -e PGID=1002 atdr.meo.ws/archiveteam/warrior-dockerfile:latest
done</p>
</blockquote>
<p>In the provided example, the script will create a new container every iteration until it reaches the indicated number of containers, each named according to the iteration number. The script will also set relevant environment variables, such as the contributor&rsquo;s name and the project you wish to collaborate on. For demonstration purposes, I&rsquo;ve selected Reddit as the project and set the maximum number of workers per container.</p>
<p>The script will automatically assign ports to the containers by combining the number 80 with the corresponding container number, thus managing to assign a port to each container in a logical and orderly manner. Finally, it will create and assign a process to fetch the container, achieving the same functionality as a &ldquo;FROM&rdquo; statement in a Dockerfile.</p>
<p>After assigning execution permissions to the script using the command <strong>chmod +x,</strong> it can be fired up like thís <strong>./&lt;script-name.sh&gt;</strong>.</p>
<p><img src="./images/script.png" alt="script"></p>
<p>To visualize the container usage statistics, the <strong>docker stats</strong> command can be used. It provides valuable information on resource consumption, including CPU usage, memory utilization, and more importantly, network activity.</p>
<p><img src="./images/docker_stats.png" alt="script"></p>
<blockquote>
<p>Notice that each of the containers has uploaded an average of 35MB worth of data in about 5 minutes.</p>
</blockquote>
<p>If you want to compare your effort against the rest of the contributors, the dashboard provides a link that heads to the leaderboard:
<img src="./images/dashboard.png" alt="dashboard"></p>
<p>This is my current rating at the time of writing:
<img src="./images/leaderboard.png" alt="leaderboard"></p>
<p>Good luck, and may the best win!</p>

            </div>
        </article></main>
</div>
<footer class="footer">
    <span class="footer_item"> </span>
    &nbsp;

    <div class="footer_social-icons">
<a href="https://github.com/123jimenez99" target="_blank" rel="noopener noreferrer me"
    title="Github">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path
        d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22">
    </path>
</svg>
</a>
<a href="https://linkedin.com/in/123jimenez99" target="_blank" rel="noopener noreferrer me"
    title="Linkedin">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
    <rect x="2" y="9" width="4" height="12"></rect>
    <circle cx="4" cy="4" r="2"></circle>
</svg>
</a>
<a href="mailto:123jimenez99@gmail.com" target="_blank" rel="noopener noreferrer me"
    title="Email">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 21" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
    <polyline points="22,6 12,13 2,6"></polyline>
</svg>
</a>
</div>
  
</footer><a href="#" title="Go to top" id="totop">
    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" stroke="currentColor" viewBox="0 96 960 960">
    <path d="M283 704.739 234.261 656 480 410.261 725.739 656 677 704.739l-197-197-197 197Z"/>
</svg>

</a>


    






    
    <script src="https://123jimenez99.github.io/js/main.min.35f435a5d8eac613c52daa28d8af544a4512337d3e95236e4a4978417b8dcb2f.js" integrity="sha256-NfQ1pdjqxhPFLaoo2K9USkUSM30&#43;lSNuSkl4QXuNyy8="></script>

    

</body>
</html>
