<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Multiply your Archive Team Warriors with Docker and some little scripting | Asier's Webpage</title><meta name=keywords content><meta name=description content="The Archive Team plays a crucial role in preserving online content, and its significance becomes even more pronounced when considering platforms like Reddit, which may be prone to vanishing due to their very questionable practices. Without further ado let&rsquo;s explain how this works.
The warrior runs on your computer and connects to the Archive Team server. It receives instructions on which websites to archive and contributes to the archiving process. Whenever a new archiving project is launched, the server assigns specific tasks to each Warrior."><meta name=author content="Asier Jiménez"><link rel=canonical href=https://123jimenez99.github.io/posts/multiply_archive_team_warrior_instances_with_docker.html><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=../assets/css/stylesheet.3613efbd0b1772781e8f49935e973cae632a7f61471c05b17be155505ccf87b5.css integrity="sha256-NhPvvQsXcngej0mTXpc8rmMqf2FHHAWxe+FVUFzPh7U=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=../assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://123jimenez99.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://123jimenez99.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://123jimenez99.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://123jimenez99.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://123jimenez99.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="Multiply your Archive Team Warriors with Docker and some little scripting"><meta property="og:description" content="The Archive Team plays a crucial role in preserving online content, and its significance becomes even more pronounced when considering platforms like Reddit, which may be prone to vanishing due to their very questionable practices. Without further ado let&rsquo;s explain how this works.
The warrior runs on your computer and connects to the Archive Team server. It receives instructions on which websites to archive and contributes to the archiving process. Whenever a new archiving project is launched, the server assigns specific tasks to each Warrior."><meta property="og:type" content="article"><meta property="og:url" content="https://123jimenez99.github.io/posts/multiply_archive_team_warrior_instances_with_docker.html"><meta property="og:image" content="https://123jimenez99.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-06-11T16:20:03+02:00"><meta property="article:modified_time" content="2023-06-11T16:20:03+02:00"><meta property="og:site_name" content="Asier's Webpage"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://123jimenez99.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Multiply your Archive Team Warriors with Docker and some little scripting"><meta name=twitter:description content="The Archive Team plays a crucial role in preserving online content, and its significance becomes even more pronounced when considering platforms like Reddit, which may be prone to vanishing due to their very questionable practices. Without further ado let&rsquo;s explain how this works.
The warrior runs on your computer and connects to the Archive Team server. It receives instructions on which websites to archive and contributes to the archiving process. Whenever a new archiving project is launched, the server assigns specific tasks to each Warrior."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Multiply your Archive Team Warriors with Docker and some little scripting","item":"https://123jimenez99.github.io/posts/multiply_archive_team_warrior_instances_with_docker.html"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Multiply your Archive Team Warriors with Docker and some little scripting","name":"Multiply your Archive Team Warriors with Docker and some little scripting","description":"The Archive Team plays a crucial role in preserving online content, and its significance becomes even more pronounced when considering platforms like Reddit, which may be prone to vanishing due to their very questionable practices. Without further ado let\u0026rsquo;s explain how this works.\nThe warrior runs on your computer and connects to the Archive Team server. It receives instructions on which websites to archive and contributes to the archiving process. Whenever a new archiving project is launched, the server assigns specific tasks to each Warrior.","keywords":[],"articleBody":"The Archive Team plays a crucial role in preserving online content, and its significance becomes even more pronounced when considering platforms like Reddit, which may be prone to vanishing due to their very questionable practices. Without further ado let’s explain how this works.\nThe warrior runs on your computer and connects to the Archive Team server. It receives instructions on which websites to archive and contributes to the archiving process. Whenever a new archiving project is launched, the server assigns specific tasks to each Warrior. The Warrior downloads the assigned web content and sends it back to the server for permanent storage. With Docker and the power of scripting, we can create multiple containers easily, thus creating lots of warriors.\nTo achieve this, I’ll make use of a script that generates the desired number of containers. Additionally, the number of jobs each container can handle can be adjusted, the limit being 6. If you wish to contribute even more, the script can be easily modified to automatically create additional containers.\n#!/bin/zsh\nfor i in {01..12}; do docker run -d –name archiveteam_$i\n–env DOWNLOADER=“Pico” –env SELECTED_PROJECT=“reddit”\n–env CONCURRENT_ITEMS=“6”\n-p 80$i:8001 –restart=unless-stopped\n-e PUID=1002 -e PGID=1002 atdr.meo.ws/archiveteam/warrior-dockerfile:latest done\nIn the provided example, the script will create a new container every iteration until it reaches the indicated number of containers, each named according to the iteration number. The script will also set relevant environment variables, such as the contributor’s name and the project you wish to collaborate on. For demonstration purposes, I’ve selected Reddit as the project and set the maximum number of workers per container.\nThe script will automatically assign ports to the containers by combining the number 80 with the corresponding container number, thus managing to assign a port to each container in a logical and orderly manner. Finally, it will create and assign a process to fetch the container, achieving the same functionality as a “FROM” statement in a Dockerfile.\nAfter assigning execution permissions to the script using the command chmod +x, it can be fired up like thís ./.\nTo visualize the container usage statistics, the docker stats command can be used. It provides valuable information on resource consumption, including CPU usage, memory utilization, and more importantly, network activity.\nNotice that each of the containers has uploaded an average of 35MB worth of data in about 5 minutes.\nIf you want to compare your effort against the rest of the contributors, the dashboard provides a link that heads to the leaderboard: This is my current rating at the time of writing: Good luck, and may the best win!\n","wordCount":"429","inLanguage":"en","datePublished":"2023-06-11T16:20:03+02:00","dateModified":"2023-06-11T16:20:03+02:00","author":{"@type":"Person","name":"Asier Jiménez"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://123jimenez99.github.io/posts/multiply_archive_team_warrior_instances_with_docker.html"},"publisher":{"@type":"Organization","name":"Asier's Webpage","logo":{"@type":"ImageObject","url":"https://123jimenez99.github.io/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://123jimenez99.github.io/ accesskey=h title="Home (Alt + H)"><img src=https://123jimenez99.github.io/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://123jimenez99.github.io/about.html title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://123jimenez99.github.io/>Home</a></div><h1 class=post-title>Multiply your Archive Team Warriors with Docker and some little scripting</h1><div class=post-meta><span title='2023-06-11 16:20:03 +0200 CEST'>June 11, 2023</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;429 words&nbsp;·&nbsp;Asier Jiménez</div></header><div class=post-content><p>The Archive Team plays a crucial role in preserving online content, and its significance becomes even more pronounced when considering platforms like Reddit, which may be prone to vanishing due to their very <a href=https://www.macrumors.com/2023/05/31/reddit-api-changes-pricing-apollo/>questionable practices</a>. Without further ado let&rsquo;s explain how this works.</p><p>The warrior runs on your computer and connects to the Archive Team server. It receives instructions on which websites to archive and contributes to the archiving process. Whenever a new archiving project is launched, the server assigns specific tasks to each Warrior. The Warrior downloads the assigned web content and sends it back to the server for permanent storage. With Docker and the power of scripting, we can create multiple containers easily, thus creating lots of warriors.</p><p>To achieve this, I&rsquo;ll make use of a script that generates the desired number of containers. Additionally, the number of jobs each container can handle can be adjusted, the limit being 6. If you wish to contribute even more, the script can be easily modified to automatically create additional containers.</p><blockquote><p>#!/bin/zsh</p><p>for i in {01..12}; do
docker run -d &ndash;name archiveteam_$i<br>&ndash;env DOWNLOADER=&ldquo;Pico&rdquo; &ndash;env SELECTED_PROJECT=&ldquo;reddit&rdquo;<br>&ndash;env CONCURRENT_ITEMS=&ldquo;6&rdquo;<br>-p 80$i:8001 &ndash;restart=unless-stopped<br>-e PUID=1002 -e PGID=1002 atdr.meo.ws/archiveteam/warrior-dockerfile:latest
done</p></blockquote><p>In the provided example, the script will create a new container every iteration until it reaches the indicated number of containers, each named according to the iteration number. The script will also set relevant environment variables, such as the contributor&rsquo;s name and the project you wish to collaborate on. For demonstration purposes, I&rsquo;ve selected Reddit as the project and set the maximum number of workers per container.</p><p>The script will automatically assign ports to the containers by combining the number 80 with the corresponding container number, thus managing to assign a port to each container in a logical and orderly manner. Finally, it will create and assign a process to fetch the container, achieving the same functionality as a &ldquo;FROM&rdquo; statement in a Dockerfile.</p><p>After assigning execution permissions to the script using the command <strong>chmod +x,</strong> it can be fired up like thís <strong>./&lt;script-name.sh></strong>.</p><p><img loading=lazy src=./images/script.png alt=script></p><p>To visualize the container usage statistics, the <strong>docker stats</strong> command can be used. It provides valuable information on resource consumption, including CPU usage, memory utilization, and more importantly, network activity.</p><p><img loading=lazy src=./images/docker_stats.png alt=script></p><blockquote><p>Notice that each of the containers has uploaded an average of 35MB worth of data in about 5 minutes.</p></blockquote><p>If you want to compare your effort against the rest of the contributors, the dashboard provides a link that heads to the leaderboard:
<img loading=lazy src=./images/dashboard.png alt=dashboard></p><p>This is my current rating at the time of writing:
<img loading=lazy src=./images/leaderboard.png alt=leaderboard></p><p>Good luck, and may the best win!</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://123jimenez99.github.io/posts/deploy-your-archive-team-warriors-properly-with-kubernetes.html><span class=title>« Prev</span><br><span>Deploy your archive warriors the proper way, with Kubernetes</span></a>
<a class=next href=https://123jimenez99.github.io/posts/what_if_cell_modern_compiler.html><span class=title>Next »</span><br><span>How could modern compilers unleash the potential of the CELL processor?</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://123jimenez99.github.io/>Asier's Webpage</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>